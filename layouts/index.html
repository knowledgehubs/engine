{{/* layouts/index.html */}}
{{ define "main" }}
  {{ $skin := default "dentist" .Site.Params.skin }}
  {{ $data := index .Site.Data $skin }}

  {{/* defensive: if no data, show a helpful message */}}
  {{ if not $data }}
    <main class="container">
      <h1>No skin data found</h1>
      <p>Create <code>data/{{ $skin }}/sections.toml</code> to control sections.</p>
    </main>
  {{ else }}
    {{ partial "head.html" . }}

    <body>
      {{/* Order matters for conversion: hero -> features -> before/after/case results -> testimonials -> cta -> contact */}}

      {{ if and (isset $data "hero") (index $data "hero").enable }}
        {{ partial "hero.html" (dict "ctx" . "data" $data.hero "skin" $skin) }}
      {{ end }}

      {{ if and (isset $data "features") (index $data "features").enable }}
        {{ partial "features.html" (dict "ctx" . "data" $data.features "skin" $skin) }}
      {{ end }}

      {{/* Dentist before_after, Realestate case_results â€” include generically but each partial will check */}}
      {{ if and (isset $data "before_after") (index $data "before_after").enable }}
        {{ partial "before_after.html" (dict "ctx" . "data" $data.before_after "skin" $skin) }}
      {{ end }}

      {{ if and (isset $data "case_results") (index $data "case_results").enable }}
        {{ partial "case_results.html" (dict "ctx" . "data" $data.case_results "skin" $skin) }}
      {{ end }}

      {{ if and (isset $data "testimonials") (index $data "testimonials").enable }}
        {{ partial "testimonials.html" (dict "ctx" . "data" $data.testimonials "skin" $skin) }}
      {{ end }}

      {{ if and (isset $data "cta") (index $data "cta").enable }}
        {{ partial "cta.html" (dict "ctx" . "data" $data.cta "skin" $skin "meta" $data.meta) }}
      {{ end }}

      {{ if and (isset $data "contact") (index $data "contact").enable }}
        {{ partial "contact.html" (dict "ctx" . "data" $data.contact "skin" $skin) }}
      {{ end }}
    </body>
  {{ end }}
{{ end }}

