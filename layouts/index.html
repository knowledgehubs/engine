{{/* layouts/index.html - Diagnostic Version */}}

{{ $skin := default "dentist" .Site.Params.skin }}
{{ $data := index .Site.Data $skin }}

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>DIAGNOSTIC TEST</title>
  </head>
  <body>
    
    <div style="padding: 30px; font-family: sans-serif;">
      <h1>DIAGNOSTIC RESULTS:</h1>
      
      {{ if not $data }}
        <p style="color: red; font-size: 1.2rem;">❌ ERROR: Data for skin '{{ $skin }}' was NOT loaded!</p>
        <p>Please check: <code>data/{{ $skin }}/sections.toml</code></p>
      {{ else }}
        <p style="color: green; font-size: 1.2rem;">✅ SUCCESS: Data loaded from skin: <strong>{{ $skin }}</strong></p>
        <p><strong>Brand Name Read:</strong> {{ default "Error Reading Brand" $data.meta.brand }}</p>
        
        <hr style="margin-top:20px;">
        
        {{ partial "head.html" . }} 

        <p style="margin-top: 20px;">If this page is still BLANK, the error is inside <code>partials/head.html</code> or <code>partials/hero.html</code>.</p>

        {{ if and (isset $data "hero") (index $data "hero").enable }}
           <h2>Hero Section Test</h2>
           {{ partial "hero.html" (dict "ctx" . "data" $data.hero "skin" $skin "meta" $data.meta) }}
        {{ end }}

      {{ end }}
    </div>

  </body>
</html>
